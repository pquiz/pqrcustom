<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-image/iron-image.html">
<link rel="import" href="../bower_components/neon-animation/neon-animation-runner-behavior.html" />
<link rel="import" href="../bower_components/iron-scroll-threshold/iron-scroll-threshold.html" />
<link rel="import" href="../bower_components/neon-animation/neon-animations.html" />
<link rel="import" href="../bower_components/paper-button/paper-button.html" />
<link rel="import" href="../bower_components/paper-card/paper-card.html" />
<link rel="import" href="my-item.html">
<link rel="import" href="shared-styles.html">
<dom-module id="my-lista">
    <template>
        <style include="shared-styles">
            :host {
                display: block;
                padding: 10px;
                width: 100%;
                height: 100%;
            }

            #example-sizing-contain {
                width: 20vw;
                height: 20vw;
                background: #ddd;
            }



            .precio {
                color: var(--color-success);
                margin-bottom: 2vh;
            }

            neon-animated-pages, neon-animatable, iron-image {
                height: 100%;
                width: 100%;
            }

            @media screen and (max-width: 767px) {
                paper-card.titulo {
                    --paper-card-header-text:;

            {
                font-size: 24px;
                font-weight: 800;
            }

            ;
            }
            }
        </style>
        <iron-list id="list" items="[]" as="producto" scroll-target="html">
            
                
                    <my-item id$="[[iditem]] class="articulo" articulo={{producto}}></my-item>

              
            
        </iron-list>
        <div class="loadingIndicator">
            <paper-spinner active="{{loadingPeople}}"></paper-spinner> Fetching data
        </div>
        <!-- this element will load more data when the user scrolls down and reached the lower threshold -->
        <iron-scroll-threshold id="scrollTheshold"
                               lower-threshold="500"
                               on-lower-threshold="_loadMoreData"
                               scroll-target="html">
        </iron-scroll-threshold>

            


    </template>
    <script>
        var ironscroll = null;
        var ironlista = null;
        var contador = 0;
    Polymer({
        is: 'my-lista',
        properties: {
            productos: { type: Array, notify: true, readOnly: false },
            iditem: { 
                type: String,
                reflectToAttribute: true }
        },
        ready: function () {
            ironlista = this.$.list;
            ironscroll = this.$.scrollTheshold;
            this.iditem = 'id' + this.contador;
        }
        , loadMoreData: function () {
            if (contador < this.productos.length) {
                ironlista.push('items', productos[contador]);
                this.iditem = 'id' + this.contador;
                let ele = document.querySelector('id' + this.contador);
                ele.animacion();
                contador = contador + 1;
            }
            
            
            if (contador < this.productos.length) {
                ironlista.push('items', productos[contador]);
                this.iditem = 'id' + this.contador;
                let ele = document.querySelector('id' + this.contador);
                ele.animacion();
                contador = contador + 1;
            }
            contador = contador + 1;
            // Clear the lower threshold so we can load more data when the user scrolls down again.
            ironscroll.clearTriggers();

        }

    });

    </script>
</dom-module>
